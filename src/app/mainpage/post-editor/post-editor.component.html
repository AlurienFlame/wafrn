<p-dialog [hidden]="!editorVisible" [header]="idPostToReblog ? 'Reblog a post' : 'Create new post'"
  [(visible)]="editorVisible" [modal]="true" 
  [style]="{width: '75vw'}">
  <h2 *ngIf="idPostToReblog" >You are reblogging the post. Your followers will see the full thread with your reply on it</h2>
  <p-overlayPanel
  [showTransitionOptions]="'100ms'" [hideTransitionOptions]="'100ms'"
  #uploadImagesPanel>
    <div>
      <label for="imgSelected" class="block text-900 font-medium mb-2">Upload your image</label>
      <input *ngIf="displayUploadImagePanel" id="imgSelected" type="file" accept="image/jpeg,image/png,image/webp,image/gif"
        (change)="imgSelected($event)" pTooltip="Select your avatar" tooltipPosition="top" pInputText
        class="w-full mb-3">
      <label for="description" class="block text-900 font-medium mb-2">Image description</label>
      <input [(ngModel)]="newImageDescription" id="description" type="text"
        pTooltip="Image description. Useful in the case of someone using a screen reader, or when the image does not load properly."
        tooltipPosition="top" pInputText class="w-full mb-3">

      <p-checkbox [(ngModel)]="newImageNSFW" [binary]="true" label="this is NSFW"
        pTooltip="Is this image NSFW or does it contain explicit sexual content that is not suited to minors? Just mark this and go nuts"
        tooltipPosition="top"></p-checkbox>
    </div>
    <p-button label="Upload image" [disabled]="disableImageUploadButton" (onClick)="uploadImage()"></p-button>

  </p-overlayPanel>

  <editor id="tinyMCE"
  [init]="{
     plugins: 'link code',
     skin: 'oxide-dark',
     content_css: 'dark',
     toolbar: 'uploadMedia',
     setup: setupEditor
    }"

    [(ngModel)]="postCreatorContent"
></editor>
<button pButton
icon="pi pi-upload" 
(click)="uploadImagesPanel.show($event); displayUploadImagePanel = true"
label="Add picture to post"
type="button"></button>
  <h5>Tags (comma separated, enter on android phones)</h5>
  <p-chips [(ngModel)]="tags" separator=","></p-chips>

  <p-captcha *ngIf="!postBeingSubmitted && editorVisible" (onResponse)="captchaResolved($event)" (onExpire)="captchaExpired()" [siteKey]="captchaKey" theme="dark"
    size="big">
  </p-captcha>

  <p-button  [disabled]="captchaResponse == undefined"  (onClick)="submitPost()">Submit</p-button>

</p-dialog>
